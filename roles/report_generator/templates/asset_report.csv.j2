主机名,IP地址,用户名,Python解释器,操作系统,内核版本,架构,CPU核心数,内存总量,默认IP,网络接口数,运行时间,监听端口数,运行服务数,进程数,状态
{% for host in hosts_info %}{{ host.inventory_hostname }},{{ host.ansible_host | default('unknown') }},{{ host.ansible_user | default('unknown') }},{{ host.ansible_python_interpreter | default('/usr/bin/python') }},{{ host.system_info.stdout | regex_search('NAME=\"([^\"]+)\"') | default('unknown') if host.system_info is defined else 'unknown' }} {{ host.system_info.stdout | regex_search('VERSION=\"([^\"]+)\"') | default('') if host.system_info is defined else '' }},{{ host.system_info.stdout | regex_search('Linux [^ ]+ ([^ ]+)') | default('unknown') if host.system_info is defined else 'unknown' }},{{ host.system_info.stdout | regex_search('([a-zA-Z0-9_]+)$') | default('unknown') if host.system_info is defined else 'unknown' }},{{ host.cpu_info.stdout | regex_search('CPU核心数\\s*([0-9]+)') | default('unknown') if host.cpu_info is defined else 'unknown' }},{{ host.memory_info.stdout | regex_search('Mem:\\s+([0-9]+[KMG]?)') | default('unknown') if host.memory_info is defined else 'unknown' }},{{ host.ansible_host | default('unknown') }},{{ host.network_info.stdout | default('unknown') | length if host.network_info is defined else 'unknown' }},{{ host.load_info.stdout | default('unknown') | replace(',', ';') if host.load_info is defined else 'unknown' }},{{ host.port_service_info.stdout | regex_search('LISTEN') | length if host.port_service_info is defined else 'unknown' }},{{ host.service_status.stdout | regex_search('running') | length if host.service_status is defined else 'unknown' }},{{ host.ps_info.stdout | regex_search('^[^\\s]+') | length if host.ps_info is defined else 'unknown' }},配置中
{% endfor %} 